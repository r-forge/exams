<!doctype html>
<html class="no-js" lang="en">
<head>
		<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>Conducting Written Multiple-Choice Exams in R</title>
	<link rel="stylesheet" type="text/css" href="http://exams.R-Forge.R-project.org/dev/assets/css/styles_feeling_responsive.css" />
	<script src="http://exams.R-Forge.R-project.org/dev/assets/js/modernizr.min.js"></script>

  <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js"></script>
  <script>
    WebFont.load({
      google: {
        families: [ 'Lato:400,700,400italic:latin', 'Noto+Serif:400,700,400italic:latin' ]
      }
    });
  </script>

  <noscript>
    <link href='http://fonts.googleapis.com/css?family=Lato:400,700,400italic|Volkhov' rel='stylesheet' type='text/css' />
  </noscript>

  
	
	<meta name="description" content="Step-by-step guide to generating, conducting, scanning, and automatically evaluating large-scale written exams with exams2nops() in R/exams." />

	

	



	
	<link rel="icon" sizes="32x32" href="http://exams.R-Forge.R-project.org/dev/assets/img/favicon-32x32.png" />




	
	<link rel="icon" sizes="192x192" href="http://exams.R-Forge.R-project.org/dev/assets/img/touch-icon-192x192.png" />




	
	<link rel="apple-touch-icon-precomposed" sizes="180x180" href="http://exams.R-Forge.R-project.org/dev/assets/img/apple-touch-icon-180x180-precomposed.png" />




	
	<link rel="apple-touch-icon-precomposed" sizes="152x152" href="http://exams.R-Forge.R-project.org/dev/assets/img/apple-touch-icon-152x152-precomposed.png" />




	
	<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://exams.R-Forge.R-project.org/dev/assets/img/apple-touch-icon-144x144-precomposed.png" />




	
	<link rel="apple-touch-icon-precomposed" sizes="120x120" href="http://exams.R-Forge.R-project.org/dev/assets/img/apple-touch-icon-120x120-precomposed.png" />




	
	<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://exams.R-Forge.R-project.org/dev/assets/img/apple-touch-icon-114x114-precomposed.png" />




	
	<link rel="apple-touch-icon-precomposed" sizes="76x76" href="http://exams.R-Forge.R-project.org/dev/assets/img/apple-touch-icon-76x76-precomposed.png" />




	
	<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://exams.R-Forge.R-project.org/dev/assets/img/apple-touch-icon-72x72-precomposed.png" />




	
	<link rel="apple-touch-icon-precomposed" href="http://exams.R-Forge.R-project.org/dev/assets/img/apple-touch-icon-precomposed.png" />	




	
	<meta name="msapplication-TileImage" content="http://exams.R-Forge.R-project.org/dev/assets/img/msapplication_tileimage.png" />




	
	<meta name="msapplication-TileColor" content="#fabb00" />



	<!-- Facebook Optimization -->
	<meta property="og:locale" content="en_EN" />
	
	<meta property="og:title" content="Conducting Written Multiple-Choice Exams in R" />
	<meta property="og:description" content="Automatic generation  and evaluation of exams. From Markdown, LaTeX and R code to standalone documents, learning management systems and live voting." />
	<meta property="og:url" content="http://exams.R-Forge.R-project.org/dev//rmd/tutorials/2017-08-04-exams2nops.Rmd" />
	<meta property="og:site_name" content="R/exams" />
	<meta property="og:image" content="http://exams.R-Forge.R-project.org/dev/images/olympia_front.150.jpg" />

	

	<!-- Search Engine Optimization -->
	

	<link type="text/plain" rel="author" href="http://exams.R-Forge.R-project.org/dev/humans.txt" />

	

	
</head>

</head>
<body id="top-of-page" class="post">
	
	
<div id="navigation" class="sticky">
  <nav class="top-bar" role="navigation" data-topbar>
    <ul class="title-area">
      <li class="name">
          <a href="http://exams.R-Forge.R-project.org/dev">
            <img class='nav-logo' src="http://exams.R-Forge.R-project.org/dev/assets/img/logo.svg" alt="R/exams">
          </a>
          <!-- <h1 class="show-for-small-only"><a href="http://exams.R-Forge.R-project.org/dev" class="icon-tree"> R/exams</a></h1> -->
      </li>
       <!-- Remove the class "menu-icon" to get rid of menu icon. Take out "Menu" to just have icon alone -->
      <li class="toggle-topbar menu-icon"><a href="#"><span>Navigation</span></a></li>
    </ul>
    <section class="top-bar-section">

      <ul class="left">
        

              

          
          

            
            

              <li class="has-dropdown">
                <a href="http://exams.R-Forge.R-project.org/dev/">R/exams</a>

                  <ul class="dropdown">
                    

                      

                      <li><a href="http://exams.R-Forge.R-project.org/dev/intro/elearning/">E-Learning</a></li>
                    

                      

                      <li><a href="http://exams.R-Forge.R-project.org/dev/intro/oneforall/">One-for-All</a></li>
                    

                      

                      <li><a href="http://exams.R-Forge.R-project.org/dev/intro/written/">Written Exams</a></li>
                    

                      

                      <li><a href="http://exams.R-Forge.R-project.org/dev/intro/dynamic/">Dynamic Exercises</a></li>
                    
                  </ul>

              </li>
              <li class="divider"></li>
            
          
        

              

          
          

            
            
              <li><a href="http://exams.R-Forge.R-project.org/dev/tutorials/">Tutorials</a></li>
              <li class="divider"></li>

            
            
          
        

              

          
          

            
            
              <li><a href="http://exams.R-Forge.R-project.org/dev/templates/">Exercise Templates</a></li>
              <li class="divider"></li>

            
            
          
        

              

          
          

            
            

              <li class="has-dropdown">
                <a href="http://exams.R-Forge.R-project.org/dev/blog/">Blog</a>

                  <ul class="dropdown">
                    

                      

                      <li><a href="http://exams.R-Forge.R-project.org/dev/blog/archive/">Archive</a></li>
                    
                  </ul>

              </li>
              <li class="divider"></li>
            
          
        

              

          
          
        

              

          
          
        

              

          
          
        
        
      </ul>

      <ul class="right">
        

              

          
          
        

              

          
          
        

              

          
          
        

              

          
          
        

              

          
          
            
            
              <li class="divider"></li>
              <li><a href="http://exams.R-Forge.R-project.org/dev/resources/">Resources</a></li>

            
            
          
        

              

          
          
            
            
              <li class="divider"></li>
              <li><a href="http://exams.R-Forge.R-project.org/dev/about/">About</a></li>

            
            
          
        

              

          
          
            
            
              <li class="divider"></li>
              <li><a href="http://exams.R-Forge.R-project.org/dev/search/">Search</a></li>

            
            
          
        
        
      </ul>
    </section>
  </nav>
</div><!-- /#navigation -->

	

	

<!-- <div id="masthead-no-image-header"> -->
	<!-- <div class="row"> -->
		<!-- <div class="small-12 columns"> -->
			<!-- <a id="logo" href="http://exams.R-Forge.R-project.org/dev" title="R/exams – The One-for-All Exams Generator"> -->
				<!-- <img src="http://exams.R-Forge.R-project.org/dev/assets/img/logo.svg" alt="R/exams – The One-for-All Exams Generator"> -->
			<!-- </a> -->
		<!-- </div>[> /.small-12.columns <] -->
	<!-- </div>[> /.row <] -->
<!-- </div>[> /#masthead <] -->










	<div class="row t30">
	<div class="medium-8 columns medium-offset-2 end">
		<article itemscope itemtype="http://schema.org/Article">
			<header>
				
				<figure>
					<img src="http://exams.R-Forge.R-project.org/dev/images/olympia_front.970.jpg" width="970" alt="Conducting Written Multiple-Choice Exams in R" itemprop="image">

					
					<figcaption class="text-right">
						R/exams photo (CC0).
					</figcaption>
					
				</figure>
				

				<span itemprop="name">
					
					<h1>Conducting Written Multiple-Choice Exams in R</h1>
				</span>
			</header>


			
			<p class="teaser" itemprop="description">
				Step-by-step guide to generating, conducting, scanning, and automatically evaluating large-scale written exams with exams2nops() in R/exams.
			</p>
			

			<span itemprop="articleSection">
			## Preliminaries

This tutorial demonstrates how to manage [written exams](/written/) with multiple-choice
and/or single-choice questions in R/exams. On the R side this involves three steps:
1. Exam generation (PDF files, 1 per exam).
2. Scan resulting sheets (PDF or PNG format).
3. Evaluate results and generate reports.

To begin, start your R session in a dedicated directory for your exam and load the `exams` package.

```{r load package}
library("exams")
```

**TODO**
* Introduce a general mechanism for including supplementary files.
* Show snapshots and make files accessible.
* Different header image?
* Move _Options_ section to a separate blog post.


## Exam generation

First, define an exam `myexam` which is simply a list of exercises.

```{r exam definition}
myexam <- list(
  "tstat2.Rnw",
  "ttest.Rnw",
  "relfreq.Rnw",
  "anova.Rnw",
  c("boxplots.Rnw", "scatterplot.Rnw"),
  "cholesky.Rnw"
)
```

Here, we use a number of `schoice` and `mchoice` questions that are directly shipped
within the package. In practice, you would use files that you have authored and stored
somewhere locally. Above, the exercises in .Rnw format are used but all of the examples
are also available in .Rmd format, leading to virtually identical output.


Then, we create `n = 2` randomly drawn versions from this exam on the disk in a new
output directory `nops_pdf`. To customize the exam we assign a different number of
points to the different exercises and also show the respective number of points at
the beginning of each question.

```{r exams2nops}
set.seed(403)
ex1 <- exams2nops(myexam, n = 2,
  dir = "nops_pdf", name = "demo", date = "2015-07-29",
  points = c(1, 1, 1, 2, 2, 3), showpoints = TRUE)
```

A random seed is set to make the generated exams exactly reproducible for you
(or ourselves at some point in the future). All metainformation is stored in a list of
lists `ex1` which we do not use here.

The output directory now contains three files that were generated: the two PDF files
are the two exams we requested above. Furthermore, the metainfromation about the exam
(exam IDs, questions, correct and wrong answer alternatives) is stored in a .rds
file (serialized R data). The latter is crucial for being able to evaluate the exam
later on.

```{r exams2nops-files}
dir("nops_pdf")
```

Now the PDFs need to be printed out for the exam. (_Recommendation:_ The exams should
be stapled in the top left corner.)


## Scan results

For each exam completed by a student, collect the main exam sheet containing
the exam ID, student ID, and the checked answers. Use some scanning facilities
(typically, the photocopiers provided by your university) and scan all sheets
into PDF or PNG files. In case of PDFs, each file may contain an arbitrary number
of sheets (just a single sheet or all sheets or everything in between).

For demonstration, we use two completed exam sheets that are provided along with
the `exams` package and copy them to a dedicated directory `nops_scan`:

```{r exams2nops-scans, results="hide"}
img <- dir(system.file("nops", package = "exams"), pattern = "nops_scan",
  full.names = TRUE)
dir.create("nops_scan")
file.copy(img, to = "nops_scan")
```

Using the function `nops_scan()` we can now read all scanned images (i.e.,
all locally available PNG and/or PDF files), make the scanned information
available in a plain text data file (called `Daten.txt` for historical reasons)
and collect everything in a ZIP file:

```{r nops_scan, results="hide", warning=FALSE}
nops_scan(dir = "nops_scan")
```

```{r nops_scan-dir}
dir("nops_scan")
```

See `?nops_scan` for more details, e.g., multicore support or options for
rotating PDF files prior to scanning. Also feel free to explore the format
of the files in the ZIP file which should be self-explanatory.

Now that scanning is complete we switch back to the original working directory.


## Evaluate results

In the previous scanning step the exam sheets have just been _read_ but not
yet _evaluated_, i.e., it has not yet been assessed which questions were answered
(partially) correctly and which were wrong, and no points have been assigned.
Therefore, we use `nops_eval()` to carry out these computations and to make
the results available - both in a format easy to read for machines (a CSV file)
and a format for humans (one HTML page for each student).

To do so, three files are required: (a) an RDS file with the exam meta-information
(generated in Step 1), (b) a ZIP file with the scanned sheets (generated in Step 2),
(c) and a CSV file with the student infomation (registration number, name, and some
ID or username). In practice, this CSV file will typically be processed from some
registration service or learning management system etc. However, here we simply
create a suitable CSV file on the fly.

```{r registration-csv}
write.table(data.frame(
  registration = c("1501090", "9901071"),
  name = c("Jane Doe", "Ambi Dexter"),
  id = c("jane_doe", "ambi_dexter")
), file = "Exam-2015-07-29.csv", sep = ";", quote = FALSE, row.names = FALSE)
dir()
```
Now the exam can be evaluated creating an output data frame (also stored
as CSV file) and individual HTML reports (stored in a ZIP file). Here, we
employ an evaluation scheme without partial points in the multiple-choice questions
and differing points across questions.

```{r nops_eval}
ev1 <- nops_eval(
  register = "Exam-2015-07-29.csv",
  solutions = "nops_pdf/demo.rds",
  scans = Sys.glob("nops_scan/nops_scan_*.zip"),
  eval = exams_eval(partial = FALSE, negative = FALSE),
  interactive = FALSE
)
dir()
```

The evaluated data can be inspected by optining `nops_eval.csv` in some spreadsheet
software or we can directly look at the data in R.

```{r nops_eval-data}
ev1
```

To inspect the corresponding HTML reports from within R:

```{r eval=FALSE}
unzip("nops_eval.zip")
browseURL(file.path("jane_doe",    "Exam-2015-07-29.html"))
browseURL(file.path("ambi_dexter", "Exam-2015-07-29.html"))
```

## Options

Below three typically-needed options are discussed:
* using a different evaluation strategy (here with partial credits),
* using a different language (here de/German),
* an error of the participant when filling in the registration number.

As for the evaluation: Partial credits should only be used for multiple-choice questions
where at least one alternative is correct and at least one is false.
_Note that in this example this is not the case for the first question
(single-choice) and the third question for Jane Doe (no alternative correct)._

As for the registration number errors: For Ambi Dexter such an error was included in the PNG example
image, the actual number is "9911071" but the crosses indicate "9901071".

Clean up previous evaluation

```
file.remove(c("nops_eval.csv", "nops_eval.zip"))
```

Write correct registration information

```
write.table(data.frame(
  registration = c("1501090", "9911071"),
  name = c("Jane Doe", "Ambi Dexter"),
  id = c("jane_doe", "ambi_dexter")
), file = "Exam-2015-07-29.csv", sep = ";", quote = FALSE, row.names = FALSE)
```

Call `nops_eval()` with modified options, where the error in the registration
number of Ambi Dexter will trigger an interactive prompt.

```
ev2 <- nops_eval(
  register = "Exam-2015-07-29.csv",
  solutions = "nops_pdf/metainfo.rds",
  scans = Sys.glob("nops_scan/nops_scan_*.zip"),
  eval = exams_eval(partial = TRUE, rule = "false2"),
  language = "de")
```

Inspect evaluated data.
```
ev2
cbind(ev1$points, ev2$points)
```

Inspect corresponding HTML reports.
```
unzip("nops_eval.zip")
browseURL(file.path("jane_doe",    "Exam-2015-07-29.html"))
browseURL(file.path("ambi_dexter", "Exam-2015-07-29.html"))
```


```{r cleanup, echo = FALSE, results = "hide"}
unlink("nops_pdf/", recursive = TRUE, force = TRUE)
unlink("nops_scan/", recursive = TRUE, force = TRUE)
file.remove(Sys.glob("nops_eval.*"))
file.remove(Sys.glob("Exam-*.csv"))
```

			</span>

			

			

		</article>

    

	</div><!-- /.medium-8.columns -->


	


	
</div><!-- /.row -->


	
	    <div id="up-to-top" class="row">
      <div class="small-12 columns" style="text-align: right;">
        <a class="iconfont" href="#top-of-page">&#xf108;</a>
      </div><!-- /.small-12.columns -->
    </div><!-- /.row -->


    <footer id="footer-content" class="bg-grau">
      <div id="footer">
        <div class="row">
          <div class="medium-6 large-5 columns">
            <h5 class="shadow-black">About This Site</h5>

            <p class="shadow-black">
              Automatic generation  and evaluation of exams. From Markdown, LaTeX and R code to standalone documents, learning management systems and live voting.
              <a href="http://exams.R-Forge.R-project.org/dev/about/">More ›</a>
            </p>
          </div><!-- /.large-6.columns -->


          <div class="small-6 medium-3 large-3 large-offset-1 columns">
            
              
                <h5 class="shadow-black">Services</h5>
              
            
              
            
              
            
              
            

              <ul class="no-bullet shadow-black">
              
                
                  <li >
                    <a href=""  title=""></a>
                  </li>
              
                
                  <li >
                    <a href="/feed.xml"  title="Subscribe to RSS Feed">RSS</a>
                  </li>
              
                
                  <li >
                    <a href="/atom.xml"  title="Subscribe to Atom Feed">Atom</a>
                  </li>
              
                
                  <li >
                    <a href="/sitemap.xml"  title="Sitemap for Google Webmaster Tools">sitemap.xml</a>
                  </li>
              
              </ul>
          </div><!-- /.large-4.columns -->


          <div class="small-6 medium-3 large-3 columns">
            
              
                <h5 class="shadow-black">Network</h5>
              
            
              
            
              
            

            <ul class="no-bullet shadow-black">
            
              
                <li >
                  <a href=""  title=""></a>
                </li>
            
              
                <li >
                  <a href="https://cran.r-project.org/web/packages/exams/index.html" target="_blank"  title="Get software package">CRAN</a>
                </li>
            
              
                <li >
                  <a href="https://r-forge.r-project.org/R/?group_id=1337" target="_blank"  title="Package development">R-Forge</a>
                </li>
            
            </ul>
          </div><!-- /.large-3.columns -->
        </div><!-- /.row -->

      </div><!-- /#footer -->


      <div id="subfooter">
        <nav class="row">
          <section id="subfooter-left" class="b30 small-12 medium-6 columns credits">
            <p>
            Built with
            <a href="https://jekyllrb.com/" alt="Page built with Jekyll">
              Jekyll
            </a>
             based on
             <a href="http://phlow.github.io/feeling-responsive/" alt="Page based on Feeling Responisve Theme">
               Feeling Responsive
             </a>
              by
              <a href="http://phlow.de" alt="Theme created by Phlow">Phlow</a>.
            </p>
          </section>

          <section id="subfooter-right" class="small-12 medium-6 columns social-icons">
            <ul class="inline-list">
            
            </ul>
          </section>
        </nav>
      </div><!-- /#subfooter -->
    </footer>

	

	


<script src="http://exams.R-Forge.R-project.org/dev/assets/js/javascript.min.js"></script>
<script src="http://exams.R-Forge.R-project.org/dev/assets/js/slick.min.js"></script>
















</body>
</html>

