<!doctype html>
<html class="no-js" lang="en">
<head>
		<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>Conducting Written Multiple-Choice Exams in R</title>
	<link rel="stylesheet" type="text/css" href="http://exams.R-Forge.R-project.org/dev/assets/css/styles_feeling_responsive.css" />
	<script src="http://exams.R-Forge.R-project.org/dev/assets/js/modernizr.min.js"></script>

  <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js"></script>
  <script>
    WebFont.load({
      google: {
        families: [ 'Lato:400,700,400italic:latin', 'Noto+Serif:400,700,400italic:latin' ]
      }
    });
  </script>

  <noscript>
    <link href='http://fonts.googleapis.com/css?family=Lato:400,700,400italic|Volkhov' rel='stylesheet' type='text/css' />
  </noscript>

  
	
	<meta name="description" content="Step-by-step guide to generating, conducting, scanning, and automatically evaluating large-scale written exams with exams2nops() in R/exams." />

	

	



	
	<link rel="icon" sizes="32x32" href="http://exams.R-Forge.R-project.org/dev/assets/img/favicon-32x32.png" />




	
	<link rel="icon" sizes="192x192" href="http://exams.R-Forge.R-project.org/dev/assets/img/touch-icon-192x192.png" />




	
	<link rel="apple-touch-icon-precomposed" sizes="180x180" href="http://exams.R-Forge.R-project.org/dev/assets/img/apple-touch-icon-180x180-precomposed.png" />




	
	<link rel="apple-touch-icon-precomposed" sizes="152x152" href="http://exams.R-Forge.R-project.org/dev/assets/img/apple-touch-icon-152x152-precomposed.png" />




	
	<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://exams.R-Forge.R-project.org/dev/assets/img/apple-touch-icon-144x144-precomposed.png" />




	
	<link rel="apple-touch-icon-precomposed" sizes="120x120" href="http://exams.R-Forge.R-project.org/dev/assets/img/apple-touch-icon-120x120-precomposed.png" />




	
	<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://exams.R-Forge.R-project.org/dev/assets/img/apple-touch-icon-114x114-precomposed.png" />




	
	<link rel="apple-touch-icon-precomposed" sizes="76x76" href="http://exams.R-Forge.R-project.org/dev/assets/img/apple-touch-icon-76x76-precomposed.png" />




	
	<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://exams.R-Forge.R-project.org/dev/assets/img/apple-touch-icon-72x72-precomposed.png" />




	
	<link rel="apple-touch-icon-precomposed" href="http://exams.R-Forge.R-project.org/dev/assets/img/apple-touch-icon-precomposed.png" />	




	
	<meta name="msapplication-TileImage" content="http://exams.R-Forge.R-project.org/dev/assets/img/msapplication_tileimage.png" />




	
	<meta name="msapplication-TileColor" content="#fabb00" />



	<!-- Facebook Optimization -->
	<meta property="og:locale" content="en_EN" />
	
	<meta property="og:title" content="Conducting Written Multiple-Choice Exams in R" />
	<meta property="og:description" content="Automatic generation  and evaluation of exams. From Markdown, LaTeX and R code to standalone documents, learning management systems and live voting." />
	<meta property="og:url" content="http://exams.R-Forge.R-project.org/dev//tutorials/exams2nops/" />
	<meta property="og:site_name" content="R/exams" />
	<meta property="og:image" content="http://exams.R-Forge.R-project.org/dev/images/olympia_front.150.jpg" />

	

	<!-- Search Engine Optimization -->
	

	<link type="text/plain" rel="author" href="http://exams.R-Forge.R-project.org/dev/humans.txt" />

	

	
</head>

</head>
<body id="top-of-page" class="post">
	
	
<div id="navigation" class="sticky">
  <nav class="top-bar" role="navigation" data-topbar>
    <ul class="title-area">
      <li class="name">
          <a href="http://exams.R-Forge.R-project.org/dev">
            <img class='nav-logo' src="http://exams.R-Forge.R-project.org/dev/assets/img/logo.svg" alt="R/exams">
          </a>
          <!-- <h1 class="show-for-small-only"><a href="http://exams.R-Forge.R-project.org/dev" class="icon-tree"> R/exams</a></h1> -->
      </li>
       <!-- Remove the class "menu-icon" to get rid of menu icon. Take out "Menu" to just have icon alone -->
      <li class="toggle-topbar menu-icon"><a href="#"><span>Navigation</span></a></li>
    </ul>
    <section class="top-bar-section">

      <ul class="left">
        

              

          
          

            
            

              <li class="has-dropdown">
                <a href="http://exams.R-Forge.R-project.org/dev/">R/exams</a>

                  <ul class="dropdown">
                    

                      

                      <li><a href="http://exams.R-Forge.R-project.org/dev/intro/elearning/">E-Learning</a></li>
                    

                      

                      <li><a href="http://exams.R-Forge.R-project.org/dev/intro/oneforall/">One-for-All</a></li>
                    

                      

                      <li><a href="http://exams.R-Forge.R-project.org/dev/intro/written/">Written Exams</a></li>
                    

                      

                      <li><a href="http://exams.R-Forge.R-project.org/dev/intro/dynamic/">Dynamic Exercises</a></li>
                    
                  </ul>

              </li>
              <li class="divider"></li>
            
          
        

              

          
          

            
            
              <li><a href="http://exams.R-Forge.R-project.org/dev/tutorials/">Tutorials</a></li>
              <li class="divider"></li>

            
            
          
        

              

          
          

            
            
              <li><a href="http://exams.R-Forge.R-project.org/dev/templates/">Exercise Templates</a></li>
              <li class="divider"></li>

            
            
          
        

              

          
          

            
            

              <li class="has-dropdown">
                <a href="http://exams.R-Forge.R-project.org/dev/blog/">Blog</a>

                  <ul class="dropdown">
                    

                      

                      <li><a href="http://exams.R-Forge.R-project.org/dev/blog/archive/">Archive</a></li>
                    
                  </ul>

              </li>
              <li class="divider"></li>
            
          
        

              

          
          
        

              

          
          
        

              

          
          
        
        
      </ul>

      <ul class="right">
        

              

          
          
        

              

          
          
        

              

          
          
        

              

          
          
        

              

          
          
            
            
              <li class="divider"></li>
              <li><a href="http://exams.R-Forge.R-project.org/dev/resources/">Resources</a></li>

            
            
          
        

              

          
          
            
            
              <li class="divider"></li>
              <li><a href="http://exams.R-Forge.R-project.org/dev/about/">About</a></li>

            
            
          
        

              

          
          
            
            
              <li class="divider"></li>
              <li><a href="http://exams.R-Forge.R-project.org/dev/search/">Search</a></li>

            
            
          
        
        
      </ul>
    </section>
  </nav>
</div><!-- /#navigation -->

	

	

<!-- <div id="masthead-no-image-header"> -->
	<!-- <div class="row"> -->
		<!-- <div class="small-12 columns"> -->
			<!-- <a id="logo" href="http://exams.R-Forge.R-project.org/dev" title="R/exams – The One-for-All Exams Generator"> -->
				<!-- <img src="http://exams.R-Forge.R-project.org/dev/assets/img/logo.svg" alt="R/exams – The One-for-All Exams Generator"> -->
			<!-- </a> -->
		<!-- </div>[> /.small-12.columns <] -->
	<!-- </div>[> /.row <] -->
<!-- </div>[> /#masthead <] -->










	<div class="row t30">
	<div class="medium-8 columns medium-offset-2 end">
		<article itemscope itemtype="http://schema.org/Article">
			<header>
				
				<figure>
					<img src="http://exams.R-Forge.R-project.org/dev/images/olympia_front.970.jpg" width="970" alt="Conducting Written Multiple-Choice Exams in R" itemprop="image">

					
					<figcaption class="text-right">
						R/exams photo (CC0).
					</figcaption>
					
				</figure>
				

				<span itemprop="name">
					
					<h1>Conducting Written Multiple-Choice Exams in R</h1>
				</span>
			</header>


			
			<p class="teaser" itemprop="description">
				Step-by-step guide to generating, conducting, scanning, and automatically evaluating large-scale written exams with exams2nops() in R/exams.
			</p>
			

			<span itemprop="articleSection">
			<h2 id="preliminaries">Preliminaries</h2>

<p>This tutorial demonstrates how to manage <a href="/written/">written exams</a> with multiple-choice
and/or single-choice questions in R/exams. On the R side this involves three steps:</p>
<ol>
  <li>Exam generation (PDF files, 1 per exam).</li>
  <li>Scan resulting sheets (PDF or PNG format).</li>
  <li>Evaluate results and generate reports.</li>
</ol>

<p>To begin, start your R session in a dedicated directory for your exam and load the <code class="highlighter-rouge">exams</code> package.</p>

<pre><code class="prettyprint ">library(&quot;exams&quot;)</code></pre>

<p><strong>TODO</strong></p>
<ul>
  <li>Introduce a general mechanism for including supplementary files.</li>
  <li>Show snapshots and make files accessible.</li>
  <li>Different header image?</li>
  <li>Move <em>Options</em> section to a separate blog post.</li>
</ul>

<h2 id="exam-generation">Exam generation</h2>

<p>First, define an exam <code class="highlighter-rouge">myexam</code> which is simply a list of exercises.</p>

<pre><code class="prettyprint ">myexam &lt;- list(
  &quot;tstat2.Rnw&quot;,
  &quot;ttest.Rnw&quot;,
  &quot;relfreq.Rnw&quot;,
  &quot;anova.Rnw&quot;,
  c(&quot;boxplots.Rnw&quot;, &quot;scatterplot.Rnw&quot;),
  &quot;cholesky.Rnw&quot;
)</code></pre>

<p>Here, we use a number of <code class="highlighter-rouge">schoice</code> and <code class="highlighter-rouge">mchoice</code> questions that are directly shipped
within the package. In practice, you would use files that you have authored and stored
somewhere locally. Above, the exercises in .Rnw format are used but all of the examples
are also available in .Rmd format, leading to virtually identical output.</p>

<p>Then, we create <code class="highlighter-rouge">n = 2</code> randomly drawn versions from this exam on the disk in a new
output directory <code class="highlighter-rouge">nops_pdf</code>. To customize the exam we assign a different number of
points to the different exercises and also show the respective number of points at
the beginning of each question.</p>

<pre><code class="prettyprint ">set.seed(403)
ex1 &lt;- exams2nops(myexam, n = 2,
  dir = &quot;nops_pdf&quot;, name = &quot;demo&quot;, date = &quot;2015-07-29&quot;,
  points = c(1, 1, 1, 2, 2, 3), showpoints = TRUE)</code></pre>

<p>A random seed is set to make the generated exams exactly reproducible for you
(or ourselves at some point in the future). All metainformation is stored in a list of
lists <code class="highlighter-rouge">ex1</code> which we do not use here.</p>

<p>The output directory now contains three files that were generated: the two PDF files
are the two exams we requested above. Furthermore, the metainfromation about the exam
(exam IDs, questions, correct and wrong answer alternatives) is stored in a .rds
file (serialized R data). The latter is crucial for being able to evaluate the exam
later on.</p>

<pre><code class="prettyprint ">dir(&quot;nops_pdf&quot;)</code></pre>

<pre><code>## [1] &quot;demo.rds&quot;  &quot;demo1.pdf&quot; &quot;demo2.pdf&quot;
</code></pre>

<p>Now the PDFs need to be printed out for the exam. (<em>Recommendation:</em> The exams should
be stapled in the top left corner.)</p>

<h2 id="scan-results">Scan results</h2>

<p>For each exam completed by a student, collect the main exam sheet containing
the exam ID, student ID, and the checked answers. Use some scanning facilities
(typically, the photocopiers provided by your university) and scan all sheets
into PDF or PNG files. In case of PDFs, each file may contain an arbitrary number
of sheets (just a single sheet or all sheets or everything in between).</p>

<p>For demonstration, we use two completed exam sheets that are provided along with
the <code class="highlighter-rouge">exams</code> package and copy them to a dedicated directory <code class="highlighter-rouge">nops_scan</code>:</p>

<pre><code class="prettyprint ">img &lt;- dir(system.file(&quot;nops&quot;, package = &quot;exams&quot;), pattern = &quot;nops_scan&quot;,
  full.names = TRUE)
dir.create(&quot;nops_scan&quot;)
file.copy(img, to = &quot;nops_scan&quot;)</code></pre>

<p>Using the function <code class="highlighter-rouge">nops_scan()</code> we can now read all scanned images (i.e.,
all locally available PNG and/or PDF files), make the scanned information
available in a plain text data file (called <code class="highlighter-rouge">Daten.txt</code> for historical reasons)
and collect everything in a ZIP file:</p>

<pre><code class="prettyprint ">nops_scan(dir = &quot;nops_scan&quot;)</code></pre>

<pre><code class="prettyprint ">dir(&quot;nops_scan&quot;)</code></pre>

<pre><code>## [1] &quot;nops_scan_20170804133407.zip&quot; &quot;nops_scan1.png&quot;              
## [3] &quot;nops_scan2.png&quot;
</code></pre>

<p>See <code class="highlighter-rouge">?nops_scan</code> for more details, e.g., multicore support or options for
rotating PDF files prior to scanning. Also feel free to explore the format
of the files in the ZIP file which should be self-explanatory.</p>

<p>Now that scanning is complete we switch back to the original working directory.</p>

<h2 id="evaluate-results">Evaluate results</h2>

<p>In the previous scanning step the exam sheets have just been <em>read</em> but not
yet <em>evaluated</em>, i.e., it has not yet been assessed which questions were answered
(partially) correctly and which were wrong, and no points have been assigned.
Therefore, we use <code class="highlighter-rouge">nops_eval()</code> to carry out these computations and to make
the results available - both in a format easy to read for machines (a CSV file)
and a format for humans (one HTML page for each student).</p>

<p>To do so, three files are required: (a) an RDS file with the exam meta-information
(generated in Step 1), (b) a ZIP file with the scanned sheets (generated in Step 2),
(c) and a CSV file with the student infomation (registration number, name, and some
ID or username). In practice, this CSV file will typically be processed from some
registration service or learning management system etc. However, here we simply
create a suitable CSV file on the fly.</p>

<pre><code class="prettyprint ">write.table(data.frame(
  registration = c(&quot;1501090&quot;, &quot;9901071&quot;),
  name = c(&quot;Jane Doe&quot;, &quot;Ambi Dexter&quot;),
  id = c(&quot;jane_doe&quot;, &quot;ambi_dexter&quot;)
), file = &quot;Exam-2015-07-29.csv&quot;, sep = &quot;;&quot;, quote = FALSE, row.names = FALSE)
dir()</code></pre>

<pre><code>## [1] &quot;2017-08-04-exams2nops.Rmd&quot; &quot;Exam-2015-07-29.csv&quot;      
## [3] &quot;nops_pdf&quot;                  &quot;nops_scan&quot;
</code></pre>
<p>Now the exam can be evaluated creating an output data frame (also stored
as CSV file) and individual HTML reports (stored in a ZIP file). Here, we
employ an evaluation scheme without partial points in the multiple-choice questions
and differing points across questions.</p>

<pre><code class="prettyprint ">ev1 &lt;- nops_eval(
  register = &quot;Exam-2015-07-29.csv&quot;,
  solutions = &quot;nops_pdf/demo.rds&quot;,
  scans = Sys.glob(&quot;nops_scan/nops_scan_*.zip&quot;),
  eval = exams_eval(partial = FALSE, negative = FALSE),
  interactive = FALSE
)
dir()</code></pre>

<pre><code>## [1] &quot;2017-08-04-exams2nops.Rmd&quot; &quot;Exam-2015-07-29.csv&quot;      
## [3] &quot;nops_eval.csv&quot;             &quot;nops_eval.zip&quot;            
## [5] &quot;nops_pdf&quot;                  &quot;nops_scan&quot;
</code></pre>

<p>The evaluated data can be inspected by optining <code class="highlighter-rouge">nops_eval.csv</code> in some spreadsheet
software or we can directly look at the data in R.</p>

<pre><code class="prettyprint ">ev1</code></pre>

<pre><code>##         registration        name          id        exam scrambling
## 1501090      1501090    Jane Doe    jane_doe 15072900001         00
## 9901071      9901071 Ambi Dexter ambi_dexter 15072900002         00
##                   scan points mark answer.1 solution.1 check.1 points.1
## 1501090 nops_scan1.png      4    5    00100      00100       1        1
## 9901071 nops_scan2.png      0    5    10100      10000       0        0
##         answer.2 solution.2 check.2 points.2 answer.3 solution.3 check.3
## 1501090    11101      11100       0        0    00000      00000       1
## 9901071    10111      11001       0        0    01000      01010       0
##         points.3 answer.4 solution.4 check.4 points.4 answer.5 solution.5
## 1501090        1    00100      00110       0        0    00010      00010
## 9901071        0    00000      01011       0        0    00000      11010
##         check.5 points.5 answer.6 solution.6 check.6 points.6
## 1501090       1        2    01101      01111       0        0
## 9901071       0        0    11100      00011       0        0
</code></pre>

<p>To inspect the corresponding HTML reports from within R:</p>

<pre><code class="prettyprint ">unzip(&quot;nops_eval.zip&quot;)
browseURL(file.path(&quot;jane_doe&quot;,    &quot;Exam-2015-07-29.html&quot;))
browseURL(file.path(&quot;ambi_dexter&quot;, &quot;Exam-2015-07-29.html&quot;))</code></pre>

<h2 id="options">Options</h2>

<p>Below three typically-needed options are discussed:</p>
<ul>
  <li>using a different evaluation strategy (here with partial credits),</li>
  <li>using a different language (here de/German),</li>
  <li>an error of the participant when filling in the registration number.</li>
</ul>

<p>As for the evaluation: Partial credits should only be used for multiple-choice questions
where at least one alternative is correct and at least one is false.
<em>Note that in this example this is not the case for the first question
(single-choice) and the third question for Jane Doe (no alternative correct).</em></p>

<p>As for the registration number errors: For Ambi Dexter such an error was included in the PNG example
image, the actual number is “9911071” but the crosses indicate “9901071”.</p>

<p>Clean up previous evaluation</p>

<div class="highlighter-rouge"><pre class="codehilite"><code>file.remove(c("nops_eval.csv", "nops_eval.zip"))
</code></pre></div>

<p>Write correct registration information</p>

<div class="highlighter-rouge"><pre class="codehilite"><code>write.table(data.frame(
  registration = c("1501090", "9911071"),
  name = c("Jane Doe", "Ambi Dexter"),
  id = c("jane_doe", "ambi_dexter")
), file = "Exam-2015-07-29.csv", sep = ";", quote = FALSE, row.names = FALSE)
</code></pre></div>

<p>Call <code class="highlighter-rouge">nops_eval()</code> with modified options, where the error in the registration
number of Ambi Dexter will trigger an interactive prompt.</p>

<div class="highlighter-rouge"><pre class="codehilite"><code>ev2 &lt;- nops_eval(
  register = "Exam-2015-07-29.csv",
  solutions = "nops_pdf/metainfo.rds",
  scans = Sys.glob("nops_scan/nops_scan_*.zip"),
  eval = exams_eval(partial = TRUE, rule = "false2"),
  language = "de")
</code></pre></div>

<p>Inspect evaluated data.</p>
<div class="highlighter-rouge"><pre class="codehilite"><code>ev2
cbind(ev1$points, ev2$points)
</code></pre></div>

<p>Inspect corresponding HTML reports.</p>
<div class="highlighter-rouge"><pre class="codehilite"><code>unzip("nops_eval.zip")
browseURL(file.path("jane_doe",    "Exam-2015-07-29.html"))
browseURL(file.path("ambi_dexter", "Exam-2015-07-29.html"))
</code></pre></div>


			</span>

			
						<div id="page-meta" class="t30">
				<p>
					<!-- Look the author details up from the site config. -->
					
					<!-- Output author details if some exist. -->
					
					<span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name" class="pr20 icon-edit"><a href="" target="_blank"> Achim Zeileis</a></span>
				</span>
				

				
				<time class="icon-calendar pr20" datetime="2017-08-04" itemprop="datePublished"> 2017-08-04</time>
				

				<span class="icon-archive pr20"> TUTORIALS</span>
				<br />
				<span class="pr20"><span class="icon-price-tag pr10"> exams2nops</span> <span class="icon-price-tag pr10"> written exams</span> <span class="icon-price-tag pr10"> PDF</span> <span class="icon-price-tag pr10"> scan</span> <span class="icon-price-tag pr10"> evaluation</span> <span class="icon-price-tag pr10"> R</span> </span>
			</p>

			<div id="post-nav" class="row">
				
				<div class="small-5 columns"><a class="button small radius prev" href="http://exams.R-Forge.R-project.org/dev/tutorials/installation/">&laquo; R/exams Installation Tutorial for Ubuntu users</a></div><!-- /.small-4.columns -->
				
				<div class="small-2 columns text-center"><a class="radius button small" href="http://exams.R-Forge.R-project.org/dev/blog/archive/" title="Blog Archive">Archive</a></div><!-- /.small-4.columns -->
				
			</div>
			</div><!--  /.page-meta -->
			

			

		</article>

    

	</div><!-- /.medium-8.columns -->


	


	
</div><!-- /.row -->


	
	    <div id="up-to-top" class="row">
      <div class="small-12 columns" style="text-align: right;">
        <a class="iconfont" href="#top-of-page">&#xf108;</a>
      </div><!-- /.small-12.columns -->
    </div><!-- /.row -->


    <footer id="footer-content" class="bg-grau">
      <div id="footer">
        <div class="row">
          <div class="medium-6 large-5 columns">
            <h5 class="shadow-black">About This Site</h5>

            <p class="shadow-black">
              Automatic generation  and evaluation of exams. From Markdown, LaTeX and R code to standalone documents, learning management systems and live voting.
              <a href="http://exams.R-Forge.R-project.org/dev/about/">More ›</a>
            </p>
          </div><!-- /.large-6.columns -->


          <div class="small-6 medium-3 large-3 large-offset-1 columns">
            
              
                <h5 class="shadow-black">Services</h5>
              
            
              
            
              
            
              
            

              <ul class="no-bullet shadow-black">
              
                
                  <li >
                    <a href=""  title=""></a>
                  </li>
              
                
                  <li >
                    <a href="/feed.xml"  title="Subscribe to RSS Feed">RSS</a>
                  </li>
              
                
                  <li >
                    <a href="/atom.xml"  title="Subscribe to Atom Feed">Atom</a>
                  </li>
              
                
                  <li >
                    <a href="/sitemap.xml"  title="Sitemap for Google Webmaster Tools">sitemap.xml</a>
                  </li>
              
              </ul>
          </div><!-- /.large-4.columns -->


          <div class="small-6 medium-3 large-3 columns">
            
              
                <h5 class="shadow-black">Network</h5>
              
            
              
            
              
            

            <ul class="no-bullet shadow-black">
            
              
                <li >
                  <a href=""  title=""></a>
                </li>
            
              
                <li >
                  <a href="https://cran.r-project.org/web/packages/exams/index.html" target="_blank"  title="Get software package">CRAN</a>
                </li>
            
              
                <li >
                  <a href="https://r-forge.r-project.org/R/?group_id=1337" target="_blank"  title="Package development">R-Forge</a>
                </li>
            
            </ul>
          </div><!-- /.large-3.columns -->
        </div><!-- /.row -->

      </div><!-- /#footer -->


      <div id="subfooter">
        <nav class="row">
          <section id="subfooter-left" class="b30 small-12 medium-6 columns credits">
            <p>
            Built with
            <a href="https://jekyllrb.com/" alt="Page built with Jekyll">
              Jekyll
            </a>
             based on
             <a href="http://phlow.github.io/feeling-responsive/" alt="Page based on Feeling Responisve Theme">
               Feeling Responsive
             </a>
              by
              <a href="http://phlow.de" alt="Theme created by Phlow">Phlow</a>.
            </p>
          </section>

          <section id="subfooter-right" class="small-12 medium-6 columns social-icons">
            <ul class="inline-list">
            
            </ul>
          </section>
        </nav>
      </div><!-- /#subfooter -->
    </footer>

	

	


<script src="http://exams.R-Forge.R-project.org/dev/assets/js/javascript.min.js"></script>
<script src="http://exams.R-Forge.R-project.org/dev/assets/js/slick.min.js"></script>
















</body>
</html>

